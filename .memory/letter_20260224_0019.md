# Letter to Myself (Session Handoff)

**Date:** 2026-02-24

## 1. Executive Summary
* **Goal:** Configure OAuth credentials for TikTok and Instagram, fix env var mismatch, prepare for live deployment testing.
* **Current Status:** Credentials set in local `.env`, env var name fix committed and pushed. Need to set env vars on hosting platform for live test.

## 2. The "Done" List (Context Anchor)
* Fixed `.env` and `.env.example`: renamed `TIKTOK_CLIENT_KEY` → `TIKTOK_CLIENT_ID` to match code in `oauth-providers.ts` line 46
* Set Instagram credentials in `.env`: `INSTAGRAM_CLIENT_ID`, `INSTAGRAM_CLIENT_SECRET`
* Set TikTok credentials in `.env`: `TIKTOK_CLIENT_ID="aw8r7j85bq83yw05"`, `TIKTOK_CLIENT_SECRET`
* Committed env var rename fix as `2887b54`, pushed to `origin/main`

## 3. The "Pain" Log (CRITICAL)
* **Tried:** TikTok OAuth login
* **Failed:** "client_key" error — TikTok rejected the request because `client_key` param was empty
* **Root cause:** `.env` had `TIKTOK_CLIENT_KEY` but code reads `process.env.TIKTOK_CLIENT_ID` (line 46 of `oauth-providers.ts`)
* **Fix:** Renamed env var to `TIKTOK_CLIENT_ID` in `.env` and `.env.example`
* **Note:** TikTok OAuth uses `client_key` as the URL param name, but the app internally stores it as `TIKTOK_CLIENT_ID` and maps it at lines 121 and 145 of `oauth-providers.ts`

## 4. Active Variable State
* Branch: `main`, up to date with `origin/main` at `2887b54`
* `.env` credentials set (local only, gitignored):
  - `TIKTOK_CLIENT_ID="aw8r7j85bq83yw05"`
  - `TIKTOK_CLIENT_SECRET="kOxLmNZEgYsrQgOC6oPNtBSisjTfVju7"`
  - `INSTAGRAM_CLIENT_ID="sbawt1wo2c4cycvn6m"`
  - `INSTAGRAM_CLIENT_SECRET="5BeHea0PX57tMYtwFJLVKSMbMtT4llhK"`
* Dev server running from `/Users/oliverbaer/Projects/nyxcore-systems/` (not minitik directly)
* TikTok redirect URI: `{NEXTAUTH_URL}/api/accounts/callback/tiktok`
* Instagram redirect URI: `{NEXTAUTH_URL}/api/accounts/callback/instagram`
* Build: passes, 66 tests pass

## 5. Immediate Next Steps
1. [ ] Set env vars on hosting platform (Vercel/Railway) for live deployment
2. [ ] Ensure TikTok Developer Portal has correct redirect URI matching production domain
3. [ ] Ensure Instagram/Meta app has correct redirect URI matching production domain
4. [ ] Test TikTok OAuth flow end-to-end on live deployment
5. [ ] Test Instagram OAuth flow end-to-end on live deployment
6. [ ] Backlog: Replace SHA-256 password hash with bcrypt
7. [ ] Backlog: Expand test coverage for publishing-orchestrator, analytics, adapters
